{"paragraphs":[{"text":"%md\n##Charger les données","dateUpdated":"Feb 23, 2016 10:19:21 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456261612480_19036829","id":"20160223-210652_2144402865","result":{"code":"SUCCESS","type":"HTML","msg":"<h2>Charger les données</h2>\n"},"dateCreated":"Feb 23, 2016 9:06:52 PM","dateStarted":"Feb 23, 2016 10:19:21 PM","dateFinished":"Feb 23, 2016 10:19:21 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4154","focus":true},{"title":"Voir les données csv brutes","text":"%sh\ncurl GET https://raw.githubusercontent.com/hriviere/nightclazz_spark_ml/master/data/titanic.csv | head","dateUpdated":"Feb 23, 2016 9:15:26 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456173569900_-1812723165","id":"20160222-203929_446219020","dateCreated":"Feb 22, 2016 8:39:29 PM","dateStarted":"Feb 23, 2016 9:15:26 PM","dateFinished":"Feb 23, 2016 9:15:27 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4155","errorMessage":""},{"title":"Télecharger le dataset déja \"parsé\" (fichier parquet)\"","text":"%sh\n#Parquet est un format de fichier binaire permettant de stocker des données sous forme de table (données et metadonnée)\nrm /home/udl_spark/titanic.parquet\ncurl GET https://raw.githubusercontent.com/hriviere/nightclazz_spark_ml/master/data/titanic.parquet > /home/udl_spark/titanic.parquet","dateUpdated":"Feb 23, 2016 9:18:33 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sh","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456261722339_1437391485","id":"20160223-210842_1436935407","dateCreated":"Feb 23, 2016 9:08:42 PM","dateStarted":"Feb 23, 2016 9:17:18 PM","dateFinished":"Feb 23, 2016 9:17:19 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4156","errorMessage":""},{"title":"Spark : Enregistrer le dataset comme la table temporaire \"titanic\"","text":"\n//Read parquet file\nsqlContext.read.parquet(\"/home/udl_spark/titanic.parquet\").registerTempTable(\"titanic\")\n\n","dateUpdated":"Feb 23, 2016 9:42:11 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456173804208_1974496532","id":"20160222-204324_1879528493","dateCreated":"Feb 22, 2016 8:43:24 PM","dateStarted":"Feb 23, 2016 9:42:11 PM","dateFinished":"Feb 23, 2016 9:42:12 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4157","errorMessage":""},{"text":"%md \n\n#Etudier les données","dateUpdated":"Feb 23, 2016 10:19:17 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456174657793_1105362970","id":"20160222-205737_324108008","result":{"code":"SUCCESS","type":"HTML","msg":"<h1>Etudier les données</h1>\n"},"dateCreated":"Feb 22, 2016 8:57:37 PM","dateStarted":"Feb 23, 2016 10:19:17 PM","dateFinished":"Feb 23, 2016 10:19:17 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4158","focus":true},{"text":"%sql\nselect * from titanic","dateUpdated":"Feb 23, 2016 9:42:17 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456174098188_-2064382883","id":"20160222-204818_646364168","dateCreated":"Feb 22, 2016 8:48:18 PM","dateStarted":"Feb 23, 2016 9:42:17 PM","dateFinished":"Feb 23, 2016 9:42:17 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4159","errorMessage":""},{"text":"%md\n#VARIABLE DESCRIPTIONS:\nsurvival        Survivant (0 = Non; 1 = Oui)\n                \npclass          Classe de voyage (1 = première; 2 = seconde; 3 = 3e classe)\nname            Nom\nsex             Sexe\nage             Age\nsibsp           Nombre de frères/soeurs/épouse à bord\nparch           Nombre de parent/enfant à bord à bord\nticket          Numéro de ticket\nfare            Prix du ticket\ncabin           N° de cabine\nembarked        Port d'embarquement (C = Cherbourg; Q = Queenstown; S = Southampton)","dateUpdated":"Feb 23, 2016 10:19:14 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456175046875_569206893","id":"20160222-210406_716010113","result":{"code":"SUCCESS","type":"HTML","msg":"<h1>VARIABLE DESCRIPTIONS:</h1>\n<p>survival        Survivant (0 = Non; 1 = Oui)</p>\n<p>pclass          Classe de voyage (1 = première; 2 = seconde; 3 = 3e classe)\n<br  />name            Nom\n<br  />sex             Sexe\n<br  />age             Age\n<br  />sibsp           Nombre de frères/soeurs/épouse à bord\n<br  />parch           Nombre de parent/enfant à bord à bord\n<br  />ticket          Numéro de ticket\n<br  />fare            Prix du ticket\n<br  />cabin           N° de cabine\n<br  />embarked        Port d'embarquement (C = Cherbourg; Q = Queenstown; S = Southampton)</p>\n"},"dateCreated":"Feb 22, 2016 9:04:06 PM","dateStarted":"Feb 23, 2016 10:19:14 PM","dateFinished":"Feb 23, 2016 10:19:15 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4160","focus":true},{"text":"%md \n## Identifier les variables : determiner les survivants\n\nVariable cible ? : <COMPELETER ICI>\nVariable Predictives (features) ? : <COMPELETER ICI>\nVariable non utiles ? : <COMPELETER ICI>\n\nIl s'agit d'un algorithme de REGRESSION ou CLASSIFICATION ? \n","dateUpdated":"Feb 23, 2016 9:21:36 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456174877524_899828791","id":"20160222-210117_1184181576","dateCreated":"Feb 22, 2016 9:01:17 PM","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:4161","errorMessage":""},{"text":"%md\n##Verifier complétude ","dateUpdated":"Feb 22, 2016 9:00:50 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456174199008_-256493774","id":"20160222-204959_663875863","dateCreated":"Feb 22, 2016 8:49:59 PM","dateStarted":"Feb 22, 2016 9:00:50 PM","dateFinished":"Feb 22, 2016 9:00:52 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4162","errorMessage":""},{"text":"%sql\nselect count(*)/891 from titanic where embarked is null","dateUpdated":"Feb 22, 2016 9:34:44 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"_c0","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"_c0","index":0,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456175616146_-2099450873","id":"20160222-211336_315085078","dateCreated":"Feb 22, 2016 9:13:36 PM","dateStarted":"Feb 22, 2016 9:34:44 PM","dateFinished":"Feb 22, 2016 9:34:44 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4163","errorMessage":""},{"text":"%md\n####Completer ci-dessous","dateUpdated":"Feb 23, 2016 10:19:10 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456262632019_-1612376020","id":"20160223-212352_1541131883","result":{"code":"SUCCESS","type":"HTML","msg":"<h4>Completer ci-dessous</h4>\n"},"dateCreated":"Feb 23, 2016 9:23:52 PM","dateStarted":"Feb 23, 2016 10:19:10 PM","dateFinished":"Feb 23, 2016 10:19:11 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4164","focus":true},{"text":"%md\n% de passangers sans pclass : 0\n% de passangers sans name : 0 \n% de passangers sans sex : 0\n% de passangers sans age : 20%\n% de passangers sans sibsp : 0\n% de passangers sans parch : 0\n% de passangers sans tickets : 0\n% de passangers sans fares : 0\n% de passangers sans cabin : 77%\n% de passangers sans embarked : 0","dateUpdated":"Feb 22, 2016 9:35:02 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456174850664_1968814478","id":"20160222-210050_1754161020","dateCreated":"Feb 22, 2016 9:00:50 PM","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:4165","errorMessage":""},{"text":"%md\n###Questions\nIl y a plus de survivants femme que homme : VRAI / FAUX\nLa variable PClass influence directement la variable Survived : VRAI / FAUX","dateUpdated":"Feb 23, 2016 10:19:06 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456177218409_601788480","id":"20160222-214018_1182953008","result":{"code":"SUCCESS","type":"HTML","msg":"<h3>Questions</h3>\n<p>Il y a plus de survivants femme que homme : VRAI / FAUX\n<br  />La variable PClass influence directement la variable Survived : VRAI / FAUX</p>\n"},"dateCreated":"Feb 22, 2016 9:40:18 PM","dateStarted":"Feb 23, 2016 10:19:06 PM","dateFinished":"Feb 23, 2016 10:19:06 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4166","focus":true},{"text":"%sql\nselect * from titanic ","dateUpdated":"Feb 23, 2016 9:26:17 PM","config":{"colWidth":12,"graph":{"mode":"multiBarChart","height":300,"optionOpen":true,"keys":[{"name":"Sex","index":4,"aggr":"sum"}],"values":[{"name":"Survived","index":1,"aggr":"sum"}],"groups":[{"name":"Pclass","index":2,"aggr":"sum"}],"scatter":{"xAxis":{"name":"PassengerId","index":0,"aggr":"sum"},"yAxis":{"name":"Survived","index":1,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456176921547_497661090","id":"20160222-213521_561806923","dateCreated":"Feb 22, 2016 9:35:21 PM","dateStarted":"Feb 23, 2016 9:24:40 PM","dateFinished":"Feb 23, 2016 9:24:41 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4167","errorMessage":""},{"text":"%md\n#Extractions de features\nLister ci-dessous les variables nécessaires pour la prediction (toute les variables ne sont pas prédictive)","dateUpdated":"Feb 23, 2016 9:33:12 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456263116138_-2042787446","id":"20160223-213156_863627660","dateCreated":"Feb 23, 2016 9:31:56 PM","dateStarted":"Feb 23, 2016 9:33:12 PM","dateFinished":"Feb 23, 2016 9:33:13 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4168","errorMessage":""},{"text":"Pclass, sex ,age,SibSp,Parch,Fare,embarked, survived","dateUpdated":"Feb 23, 2016 9:33:58 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456263198888_989308078","id":"20160223-213318_1758503517","dateCreated":"Feb 23, 2016 9:33:18 PM","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:4169","errorMessage":""},{"text":"%md\n###I/O algo ML\nLes algorithme ML de spark prennent en entrée __un tableau de Double__ ex : [12.3 23.0 13.0...] ==> les features \nLes algorithme ML de spark prédise __Double__ ex : 1.0 ==> Survivant","dateUpdated":"Feb 23, 2016 10:19:02 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456262838587_-1041284414","id":"20160223-212718_709152215","result":{"code":"SUCCESS","type":"HTML","msg":"<h3>I/O algo ML</h3>\n<p>Les algorithme ML de spark prennent en entrée <strong>un tableau de Double</strong> ex : [12.3 23.0 13.0&hellip;] ==> les features\n<br  />Les algorithme ML de spark prédise <strong>Double</strong> ex : 1.0 ==> Survivant</p>\n"},"dateCreated":"Feb 23, 2016 9:27:18 PM","dateStarted":"Feb 23, 2016 10:19:02 PM","dateFinished":"Feb 23, 2016 10:19:02 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4170","focus":true},{"text":"%md\nNotre datset contient des String (Sex et Embarked) qu'il va falloir transformer en Double\nSurvived est un Int qu'il va faloir convertir en Double","dateUpdated":"Feb 23, 2016 10:19:00 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456263057347_-1265487398","id":"20160223-213057_936088555","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Notre datset contient des String (Sex et Embarked) qu'il va falloir transformer en Double\n<br  />Survived est un Int qu'il va faloir convertir en Double</p>\n"},"dateCreated":"Feb 23, 2016 9:30:57 PM","dateStarted":"Feb 23, 2016 10:19:00 PM","dateFinished":"Feb 23, 2016 10:19:00 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4171","focus":true},{"title":"Selection des données","text":"val df = sqlContext.sql(\"select Pclass, sex ,age,SibSp,Parch,Fare,embarked , Double(survived) survived from titanic where age is not null\")\ndf.show(5)","dateUpdated":"Feb 23, 2016 9:37:10 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456251919151_-1897075561","id":"20160223-182519_774614679","dateCreated":"Feb 23, 2016 6:25:19 PM","dateStarted":"Feb 23, 2016 9:37:10 PM","dateFinished":"Feb 23, 2016 9:37:12 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4172","errorMessage":""},{"text":"%md\npourquoi ajouter la condition  \"where age is not null\" ?","dateUpdated":"Feb 23, 2016 10:19:29 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456263376492_-908949406","id":"20160223-213616_896013649","result":{"code":"SUCCESS","type":"HTML","msg":"<p>pourquoi ajouter la condition  &ldquo;where age is not null&rdquo; ?</p>\n"},"dateCreated":"Feb 23, 2016 9:36:16 PM","dateStarted":"Feb 23, 2016 10:19:29 PM","dateFinished":"Feb 23, 2016 10:19:29 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4173","focus":true},{"text":"%md\nPour convertir un String en Double utilisation de la fonction Spark native  StringIndexer() qui ajoute un champ Double au DataFrame","dateUpdated":"Feb 23, 2016 10:19:31 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456263480012_-1918212525","id":"20160223-213800_685500330","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Pour convertir un String en Double utilisation de la fonction Spark native  StringIndexer() qui ajoute un champ Double au DataFrame</p>\n"},"dateCreated":"Feb 23, 2016 9:38:00 PM","dateStarted":"Feb 23, 2016 10:19:31 PM","dateFinished":"Feb 23, 2016 10:19:31 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4174","focus":true},{"title":"Convertir sex en Double","text":"import org.apache.spark.ml.feature.StringIndexer\n\nval sexIndexer = new StringIndexer()\n  .setInputCol(\"sex\")\n  .setOutputCol(\"indexedSex\")\n  .fit(df)\n  \n val debugDFSexIndexed = sexIndexer.transform(df)//Debug regarder comment est transformer la variable sex\n debugDFSexIndexed.select(\"sex\",\"indexedSex\").show(3)","dateUpdated":"Feb 23, 2016 9:45:53 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456251981223_122394795","id":"20160223-182621_1231638393","dateCreated":"Feb 23, 2016 6:26:21 PM","dateStarted":"Feb 23, 2016 9:39:52 PM","dateFinished":"Feb 23, 2016 9:39:53 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4175","errorMessage":""},{"text":"%md\nFaire de même pour la colonne  embarked","dateUpdated":"Feb 23, 2016 10:18:54 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456263617391_-626794357","id":"20160223-214017_6256337","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Faire de même pour la colonne  embarked</p>\n"},"dateCreated":"Feb 23, 2016 9:40:17 PM","dateStarted":"Feb 23, 2016 10:18:54 PM","dateFinished":"Feb 23, 2016 10:18:55 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4176","focus":true},{"title":"Création de la variable indexedEmbarked","text":"import org.apache.spark.ml.feature.StringIndexer\n\nval embarkedIndexer = new StringIndexer()\n  .setInputCol(\"embarked\")\n  .setOutputCol(\"indexedEmbarked\")\n  .fit(df)\n  \n  \nval debugDFEmbarkedIndexed = embarkedIndexer.transform(debugDFSexIndexed)\n\ndebugDFEmbarkedIndexed.select(\"embarked\",\"indexedEmbarked\").show(3)","dateUpdated":"Feb 23, 2016 9:45:50 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456253610866_-1588641572","id":"20160223-185330_1635802065","dateCreated":"Feb 23, 2016 6:53:30 PM","dateStarted":"Feb 23, 2016 9:43:00 PM","dateFinished":"Feb 23, 2016 9:43:01 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4177","errorMessage":""},{"text":"%md\n#### Transfomation des features en tableau de Double ([12.3 24.4....])\nPour cela utilisation de la fonction Spark VectorAssembler","dateUpdated":"Feb 23, 2016 9:44:50 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456263790840_1947620186","id":"20160223-214310_1614331249","dateCreated":"Feb 23, 2016 9:43:10 PM","dateStarted":"Feb 23, 2016 9:44:48 PM","dateFinished":"Feb 23, 2016 9:44:48 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4178","errorMessage":""},{"title":"Création de la variable \"features\"","text":"import org.apache.spark.ml.feature.VectorAssembler\n\nval assembler = new VectorAssembler()\n  .setInputCols(Array(\"Pclass\",\"indexedSex\" ,\"age\",\"SibSp\",\"Parch\",\"Fare\",\"indexedEmbarked\"))\n  .setOutputCol(\"features\")\n  \n  \n  val debugFeaturesDF =   assembler.transform(debugDFEmbarkedIndexed)\n  \n  debugFeaturesDF.registerTempTable(\"featuresDF\")\n  ","dateUpdated":"Feb 23, 2016 10:18:20 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala","title":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456253936080_-454125979","id":"20160223-185856_80174245","dateCreated":"Feb 23, 2016 6:58:56 PM","dateStarted":"Feb 23, 2016 10:17:24 PM","dateFinished":"Feb 23, 2016 10:17:26 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4179","errorMessage":"","focus":true},{"text":"%sql\nselect features, Pclass,indexedSex ,age,SibSp,Parch,Fare,indexedEmbarked from featuresDF limit 2","dateUpdated":"Feb 23, 2016 9:47:43 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456254828122_-1428483170","id":"20160223-191348_579610467","dateCreated":"Feb 23, 2016 7:13:48 PM","dateStarted":"Feb 23, 2016 9:47:43 PM","dateFinished":"Feb 23, 2016 9:47:44 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4180","errorMessage":""},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456265113787_-813281035","id":"20160223-220513_156054297","dateCreated":"Feb 23, 2016 10:05:13 PM","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5067","text":"%md\nSpark necessite de tranformer le label avec IndexedLabel pour obtenir des metadonnées sur le label ","dateUpdated":"Feb 23, 2016 10:06:36 PM","errorMessage":""},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456265094352_325744275","id":"20160223-220454_355998812","dateCreated":"Feb 23, 2016 10:04:54 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5048","text":"val labelIndexer = new StringIndexer()\n  .setInputCol(\"survived\")\n  .setOutputCol(\"survivedIndexed\")\n  .fit(df)","dateUpdated":"Feb 23, 2016 10:08:27 PM","dateFinished":"Feb 23, 2016 10:08:29 PM","dateStarted":"Feb 23, 2016 10:08:27 PM","errorMessage":""},{"text":"%md\nVariable prédictive : features\nVariable cible : survived","dateUpdated":"Feb 23, 2016 10:18:48 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264081969_363607319","id":"20160223-214801_2044809903","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Variable prédictive : features\n<br  />Variable cible : survived</p>\n"},"dateCreated":"Feb 23, 2016 9:48:01 PM","dateStarted":"Feb 23, 2016 10:18:48 PM","dateFinished":"Feb 23, 2016 10:18:49 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4181","focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264654873_-1550117862","id":"20160223-215734_1631816191","dateCreated":"Feb 23, 2016 9:57:34 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4865","text":"%md\n#Definition du modèle","dateUpdated":"Feb 23, 2016 9:57:48 PM","dateFinished":"Feb 23, 2016 9:57:49 PM","dateStarted":"Feb 23, 2016 9:57:48 PM","errorMessage":""},{"text":"%md\n###Logistic regression\nIllustration ici : https://www.mssqltips.com/tipimages2/3471_Example.JPG","dateUpdated":"Feb 23, 2016 9:58:01 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264268460_1245896199","id":"20160223-215108_840389485","dateCreated":"Feb 23, 2016 9:51:08 PM","dateStarted":"Feb 23, 2016 9:58:01 PM","dateFinished":"Feb 23, 2016 9:58:01 PM","status":"FINISHED","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:4182","focus":true},{"text":"import org.apache.spark.ml.classification.LogisticRegression\n\nval model = new LogisticRegression()\n  .setMaxIter(40)\n  .setFeaturesCol(\"features\")\n.setLabelCol(\"survivedIndexed\")\n  \n  ","dateUpdated":"Feb 23, 2016 10:08:34 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456256307616_1349550552","id":"20160223-193827_956993451","dateCreated":"Feb 23, 2016 7:38:27 PM","dateStarted":"Feb 23, 2016 10:08:35 PM","dateFinished":"Feb 23, 2016 10:08:36 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4183","focus":true,"errorMessage":""},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264707368_1487936074","id":"20160223-215827_276342","dateCreated":"Feb 23, 2016 9:58:27 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4889","text":"%md\n#Definition du Workfow de transformation (Pipeline)\n","dateUpdated":"Feb 23, 2016 10:18:44 PM","dateFinished":"Feb 23, 2016 10:18:44 PM","dateStarted":"Feb 23, 2016 10:18:44 PM","result":{"code":"SUCCESS","type":"HTML","msg":"<h1>Definition du Workfow de transformation (Pipeline)</h1>\n"}},{"text":"import org.apache.spark.ml.Pipeline\n\nval pipeline = new Pipeline()\n  .setStages(Array(sexIndexer,embarkedIndexer,assembler,labelIndexer,  model))\n\n","dateUpdated":"Feb 23, 2016 10:17:53 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456237654083_1732441791","id":"20160223-142734_1124878038","dateCreated":"Feb 23, 2016 2:27:34 PM","dateStarted":"Feb 23, 2016 10:17:53 PM","dateFinished":"Feb 23, 2016 10:17:55 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4184","errorMessage":"","focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264760062_-1513261877","id":"20160223-215920_1299027868","dateCreated":"Feb 23, 2016 9:59:20 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4911","text":"%md\n#Entrainement du modèle","dateUpdated":"Feb 23, 2016 10:00:19 PM","dateFinished":"Feb 23, 2016 10:00:19 PM","dateStarted":"Feb 23, 2016 10:00:19 PM","errorMessage":""},{"text":"\nval Array(trainingData, testData) = df.randomSplit(Array(0.7, 0.3),15L)\n\n\n// Train model.  This also runs the indexers.\nval genModel = pipeline.fit(trainingData)\n// Make predictions.\nval predictions = genModel.transform(testData)\npredictions.select(\"Pclass\",\"sex\",\"age\",\"SibSp\",\"embarked\",\"survived\",\"prediction\",\"probability\").registerTempTable(\"testPredictions\")\n","dateUpdated":"Feb 23, 2016 10:17:57 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456256001611_-902216718","id":"20160223-193321_1033280608","dateCreated":"Feb 23, 2016 7:33:21 PM","dateStarted":"Feb 23, 2016 10:17:57 PM","dateFinished":"Feb 23, 2016 10:18:01 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4185","errorMessage":"","focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown","editorHide":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264804625_660062066","id":"20160223-220004_1099097938","dateCreated":"Feb 23, 2016 10:00:04 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4935","text":"%md\nPourquoi séparer en 30 et 70 % ?","dateUpdated":"Feb 23, 2016 10:18:37 PM","dateFinished":"Feb 23, 2016 10:18:38 PM","dateStarted":"Feb 23, 2016 10:18:37 PM","result":{"code":"SUCCESS","type":"HTML","msg":"<p>Pourquoi séparer en 30 et 70 % ?</p>\n"}},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264842687_-966009379","id":"20160223-220042_209990583","dateCreated":"Feb 23, 2016 10:00:42 PM","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4959","text":"%md\nTaux d'erreur avec la regression logistique ? : 15%","dateUpdated":"Feb 23, 2016 10:10:53 PM","errorMessage":""},{"text":"%sql\nselect count(*)/221 from testPredictions where survived!=prediction","dateUpdated":"Feb 23, 2016 10:18:03 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[{"name":"_c0","index":0,"aggr":"sum"}],"values":[],"groups":[],"scatter":{"xAxis":{"name":"_c0","index":0,"aggr":"sum"}}},"enabled":true,"editorMode":"ace/mode/sql"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456258862766_1144325026","id":"20160223-202102_1489548973","dateCreated":"Feb 23, 2016 8:21:02 PM","dateStarted":"Feb 23, 2016 10:18:03 PM","dateFinished":"Feb 23, 2016 10:18:04 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4186","errorMessage":"","focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456264919395_1516698652","id":"20160223-220159_1070237053","dateCreated":"Feb 23, 2016 10:01:59 PM","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:4992","text":"%md\n##Changement de model utilisation d'un random forest classifier","dateUpdated":"Feb 23, 2016 10:02:30 PM","dateFinished":"Feb 23, 2016 10:02:31 PM","dateStarted":"Feb 23, 2016 10:02:30 PM","errorMessage":""},{"text":"import org.apache.spark.ml.classification.{RandomForestClassificationModel, RandomForestClassifier}\nval model =  new RandomForestClassifier()\n  .setFeaturesCol(\"features\")\n.setLabelCol(\"survivedIndexed\")\n.setNumTrees(50)\n  ","dateUpdated":"Feb 23, 2016 10:16:30 PM","config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/scala"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456239520349_-616969098","id":"20160223-145840_1585284566","dateCreated":"Feb 23, 2016 2:58:40 PM","dateStarted":"Feb 23, 2016 10:16:30 PM","dateFinished":"Feb 23, 2016 10:16:31 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:4187","errorMessage":"","focus":true},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true,"editorMode":"ace/mode/markdown"},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456256682581_-823407255","id":"20160223-194442_1750705994","dateCreated":"Feb 23, 2016 7:44:42 PM","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:4188","dateUpdated":"Feb 23, 2016 10:03:35 PM","errorMessage":"","text":"%md\nReexecuter les paragraphe à partir de \"Definition du Workfow de transformation\""},{"config":{"colWidth":12,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1456265001210_-948513433","id":"20160223-220321_1146941606","dateCreated":"Feb 23, 2016 10:03:21 PM","status":"READY","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5014","text":"%md","dateUpdated":"Feb 23, 2016 10:03:35 PM","errorMessage":""}],"name":"Titanic","id":"2BF4D92XM","angularObjects":{"2BCCFYKKC":[],"2BBMTPJHK":[],"2BDXQUVRG":[],"2BBVKN15P":[]},"config":{"looknfeel":"default"},"info":{}}
